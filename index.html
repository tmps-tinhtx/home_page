<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TOMO Zoom Deeplink Test</title>
  <meta name="description" content="Test deeplink TOMO Zoom app trên nền web responsive, tối ưu mobile, padding ngăn nắp.">
  <style>
    html, body {
      min-height: 100vh;
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #6edffc 0%, #53a6fa 40%, #ff97b7 95%);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      background: rgba(255,255,255,0.97);
      border-radius: 24px;
      box-shadow: 0 8px 40px 2px rgba(30,60,120,0.13), 0 2px 8px 0 rgba(90,44,133,0.04);
      padding: 32px 18px;
      max-width: 400px;
      width: 100%;
      margin: 20px 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
    }
    h1 {
      color: #337ccf;
      margin-bottom: 10px;
      font-size: 2.1rem;
      font-weight: bold;
      text-align: center;
      letter-spacing: 1px;
      padding-bottom: 6px;
    }
    .subtitle {
      color: #fa5656;
      font-size: 1.05rem;
      text-align: center;
      margin-bottom: 22px;
      letter-spacing: 0.3px;
      font-weight: 500;
      padding: 0 8px 0 8px;
    }
    .form-group {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      margin-bottom: 22px;
      gap: 8px;
    }
    label {
      color: #337ccf;
      font-size: 1.07rem;
      font-weight: 600;
      margin-bottom: 6px;
      margin-top: 0;
    }
    input[type="text"] {
      width: 100%;
      padding: 13px 12px;
      border: 1.6px solid #62aaff;
      border-radius: 10px;
      font-size: 1.07rem;
      outline: none;
      background: #f7fafe;
      transition: border-color 0.2s;
      box-sizing: border-box;
      margin-bottom: 0;
    }
    input[type="text"]:focus {
      border-color: #fa5656;
      background: #f3f9ff;
    }
    .btn-convert {
      width: 100%;
      padding: 15px 0;
      background: linear-gradient(90deg, #337ccf, #fa5656);
      color: #fff;
      border: none;
      border-radius: 999px;
      font-size: 1.23rem;
      font-weight: bold;
      margin: 10px 0 13px 0;
      cursor: pointer;
      letter-spacing: 1px;
      box-shadow: 0 2px 12px #e2ebfa;
      transition: background 0.18s;
      outline: none;
      border-bottom: 2.2px solid #162d47;
    }
    .btn-convert:active { background: linear-gradient(90deg, #fa5656, #337ccf); }
    .deep-link-box {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      padding: 13px 0 10px 0;
      margin-bottom: 0;
      gap: 6px;
    }
    .deeplink-label {
      color: #40b483;
      font-weight: 600;
      font-size: 1.03rem;
      margin-bottom: 6px;
      letter-spacing: 0.5px;
      padding-left: 2px;
    }
    .deeplink-url {
      background: #e4f5ff;
      border-radius: 11px;
      border: 1.3px solid #5eadfa;
      padding: 10px 14px;
      font-size: 1.07rem;
      margin-bottom: 6px;
      color: #234369;
      word-break: break-all;
      text-align: left;
      letter-spacing: 0.2px;
      font-family: 'Menlo', 'Roboto Mono', monospace;
    }
    .btn-deeplink {
      width: 100%;
      padding: 15px 10px;
      background: linear-gradient(90deg, #22d1d2, #ed5881);
      color: #fff;
      border: none;
      border-radius: 999px;
      font-size: 1.13rem;
      font-weight: bold;
      letter-spacing: 1px;
      box-shadow: 0 2px 13px #c0e6f3;
      cursor: pointer;
      transition: background 0.19s;
      outline: none;
      border-bottom: 2px solid #186872;
      margin-bottom: 0;
    }
    .btn-deeplink:active { background: linear-gradient(90deg, #ed5881, #22d1d2);}
    a { text-decoration: none !important; display: block; width: 100%; }
    .brand {
      margin-top: 22px;
      padding-bottom: 2px;
      color: #bbb;
      font-size: 1.00rem;
      letter-spacing: 0.4px;
      text-align: center;
      opacity: 0.97;
      font-weight: 500;
    }
    @media (max-width: 440px) {
      .container { padding: 11vw 3vw 20vw 3vw; }
      h1 { font-size: 1.25rem; padding-bottom: 2px; }
      .subtitle { font-size: 0.98rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>TOMO Zoom Join Tester</h1>
    <div class="subtitle">
      Nhập link Zoom Meeting bất kỳ, sinh deeplink cực nhanh để test<br>
      <strong>Mở app trực tiếp trên điện thoại!</strong>
    </div>
    <div class="form-group">
      <label for="zoom-link">Zoom Meeting Link:</label>
      <input id="zoom-link" type="text" placeholder="Dán link Zoom Meeting vào đây..." autocomplete="off" spellcheck="false">
      <button class="btn-convert" onclick="makeDeeplink()">TẠO DEEPLINK & HIỆN NÚT JOIN</button>
    </div>
    <div id="deeplink-result" style="width:100%"></div>
    <div class="brand">
      &copy; 2025 TOMO Team. | <span style="color:#fa5656">Professional Deeplink Demo</span>
    </div>
  </div>
  <script>
    function extractMeetingIdAndPwd(url) {
      try {
        const u = new URL(url);
        const match = u.pathname.match(/\/j\/(\d+)/);
        const meetingId = match ? match[1] : "";
        const pwd = u.searchParams.get("pwd") || "";
        return [meetingId, pwd];
      } catch {
        return ["", ""];
      }
    }
    function makeDeeplink() {
      const input = document.getElementById("zoom-link");
      const resDiv = document.getElementById("deeplink-result");
      resDiv.innerHTML = "";
      const url = input.value.trim();
      if(!url || !url.startsWith("http")) {
        resDiv.innerHTML = "<div style='color:#fa5656;font-weight:500;padding-left:2px;'>Vui lòng nhập đúng link Zoom!</div>";
        return;
      }
      const [id, pwd] = extractMeetingIdAndPwd(url);
      if (!id) {
        resDiv.innerHTML = "<div style='color:#fa5656;font-weight:500;padding-left:2px;'>Không nhận diện được Meeting ID!</div>";
        return;
      }
      const deeplink = `tomozoom://join/${id}${pwd ? `?pwd=${encodeURIComponent(pwd)}` : ""}`;
      resDiv.innerHTML =
        `<div class="deep-link-box">
            <span class="deeplink-label">Deeplink sinh ra:</span>
            <div class="deeplink-url">${deeplink}</div>
            <a href="${deeplink}" style="text-decoration:none;display:block;">
              <button class="btn-deeplink">MỞ APP & THAM GIA CUỘC HỌP</button>
            </a>
        </div>`;
    }
    // Hỗ trợ enter trên input để thao tác nhanh
    document.getElementById("zoom-link").addEventListener("keyup", function(event){
        if(event.key === "Enter") makeDeeplink();
    });
  </script>
</body>
</html>
